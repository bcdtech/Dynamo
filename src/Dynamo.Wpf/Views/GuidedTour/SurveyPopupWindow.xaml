<Popup
    x:Class="Dynamo.Wpf.Views.GuidedTour.SurveyPopupWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:customcontrols="clr-namespace:Dynamo.Wpf.Views.GuidedTour"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Dynamo.Wpf.Views.GuidedTour"
    xmlns:localui="clr-namespace:Dynamo.Wpf.UI.GuidedTour"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prop="clr-namespace:Dynamo.Wpf.Properties"
    xmlns:ui="clr-namespace:Dynamo.UI"
    d:DesignHeight="450"
    d:DesignWidth="400"
    mc:Ignorable="d">
    <Popup.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Dynamo.Wpf;component/Themes/Modern/DynamoModern.xaml" />

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Popup.Resources>

    <Border
        Background="{StaticResource PopupWhiteColor}"
        BorderBrush="Black"
        BorderThickness="1">
        <Grid
            Width="{Binding Width}"
            Height="{Binding Height}"
            DataContext="{Binding Step}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="50" />
            </Grid.RowDefinitions>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Close button  -->
                <Button
                    Name="CloseButton"
                    Grid.Row="0"
                    Width="15"
                    Height="15"
                    Margin="20,20,20,20"
                    HorizontalAlignment="Right"
                    HorizontalContentAlignment="Center"
                    Click="CloseButton_Click"
                    Style="{StaticResource PopupCloseButtonStyle}" />

                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!--  Check Mark Symbol  -->
                    <Canvas
                        Name="CheckMark"
                        Grid.Row="0"
                        Width="30"
                        Height="30"
                        HorizontalAlignment="Center"
                        Background="Transparent">
                        <Ellipse
                            x:Name="BackCircle"
                            Width="30"
                            Height="30"
                            Fill="{StaticResource CheckMarkBackColor}" />
                        <Path
                            Name="Checkmark"
                            Data="M 8,17 15,21 23,7"
                            Fill="Transparent"
                            Stroke="{StaticResource PopupWhiteColor}"
                            StrokeThickness="3" />
                    </Canvas>
                    <!--  Title  -->
                    <Label
                        x:Name="TitleLabel"
                        Grid.Row="1"
                        HorizontalContentAlignment="Center"
                        Content="{Binding StepContent.Title}"
                        Style="{StaticResource SurveyTitleLabelStyle}" />
                </Grid>

                <!--  Learn more  -->
                <localui:CustomRichTextBox
                    x:Name="LearnMoreRichTextBox"
                    Grid.Row="2"
                    MaxWidth="300"
                    Margin="30,10,0,50"
                    HorizontalAlignment="Center"
                    HorizontalContentAlignment="Center"
                    CustomText="{Binding StepContent.FormattedText}"
                    IsDocumentEnabled="True"
                    Style="{StaticResource CustomRichTextBoxStyle}" />

                <!--  Rating  -->
                <Border
                    Grid.Row="3"
                    Width="185"
                    Height="60"
                    Background="{StaticResource PopupRatingControlBackColor}"
                    Visibility="{Binding IsRatingVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                        </Grid.RowDefinitions>
                        <Label
                            x:Name="RatingTitle"
                            Grid.Row="0"
                            Grid.Column="0"
                            Content="{Binding RatingTextTitle}"
                            Style="{StaticResource RatingTitleLabelStyle}" />
                        <customcontrols:RatingControl
                            x:Name="SurveyRatingControl"
                            Grid.Row="1"
                            Width="130"
                            Height="30"
                            Margin="0,0,0,15"
                            VerticalAlignment="Center" />

                    </Grid>
                </Border>

                <!--  This grid represents the link that redirects to the next guide  -->
                <Grid
                    Name="NextGuideLink"
                    Grid.Row="5"
                    HorizontalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <TextBlock
                        Name="NextGuidelabel"
                        Grid.Column="0"
                        HorizontalAlignment="Right"
                        FontFamily="宋体"
                        FontSize="14px"
                        Text="{x:Static prop:Resources.NextGuideText}"
                        TextAlignment="Center" />
                    <Button
                        x:Name="NextGuideNameButton"
                        Grid.Column="1"
                        Click="GetStartedButton_Click"
                        Style="{StaticResource TextButtonLink}" />
                </Grid>

                <!--  For the first release this RichTextBox will be hidden  -->
                <localui:CustomRichTextBox
                    x:Name="NextGuideRichTextBox"
                    Grid.Row="5"
                    Width="150"
                    HorizontalAlignment="Center"
                    HorizontalContentAlignment="Center"
                    CustomText="{Binding LinkNexGuide}"
                    IsDocumentEnabled="True"
                    Style="{StaticResource CustomRichTextBoxStyle}"
                    Visibility="Collapsed" />
            </Grid>
        </Grid>
    </Border>
</Popup>
