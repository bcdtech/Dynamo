<Window
    x:Class="Dynamo.UI.Views.AboutWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Dynamo.Wpf.Properties"
    xmlns:ui="clr-namespace:Dynamo.UI"
    xmlns:viewModels="clr-namespace:Dynamo.ViewModels"
    xmlns:views="clr-namespace:Dynamo.UI.Views"
    x:Name="DynamoAboutWindow"
    Width="540"
    Height="400"
    MinWidth="540"
    MinHeight="400"
    d:DataContext="{d:DesignInstance viewModels:DynamoViewModel,
                                     IsDesignTimeCreatable=False}"
    AllowsTransparency="True"
    ResizeMode="CanResizeWithGrip"
    Style="{DynamicResource DynamoWindowStyle}"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.Background>
        <SolidColorBrush Opacity="0" />
    </Window.Background>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Dynamo.Wpf;component/Themes/Modern/Generic.xaml" />

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="Close" Executed="OnCloseExecuted" />
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Key="Esc" Command="Close" />
    </Window.InputBindings>

    <Grid Background="Transparent" MouseDown="UIElement_OnMouseDown">
        <Border Name="MainBorder" Style="{StaticResource NoStyleWindowBorderStyle}">

            <Grid x:Name="LayoutRoot">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Title Bar + Close Button  -->
                <DockPanel
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Margin="18,20,18,35"
                    HorizontalAlignment="Stretch">
                    <Image
                        Name="MessageBoxImageIcon"
                        Width="24"
                        Height="24"
                        Margin="0,0,5,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        DockPanel.Dock="Left"
                        Source="/Dynamo.Wpf;component/UI/Images/dynamonotext.png" />

                    <Button
                        Name="CloseButton"
                        Margin="25,0,0,0"
                        Click="CloseButton_OnClick"
                        DockPanel.Dock="Right"
                        Style="{StaticResource CloseButtonStyle}" />

                    <Button
                        Name="MaximizeButton"
                        Click="MaximizeButton_OnClick"
                        DockPanel.Dock="Right"
                        Style="{StaticResource MaximizeButtonStyle}" />

                    <Button
                        Name="NormalizeButton"
                        Click="MaximizeButton_OnClick"
                        DockPanel.Dock="Right"
                        Style="{StaticResource RestoreButtonStyle}"
                        Visibility="Collapsed" />

                    <Button
                        Name="MinimizeButton"
                        Margin="0,0,25,0"
                        Click="MinimizeButton_OnClick"
                        DockPanel.Dock="Right"
                        Style="{StaticResource MinimizeButtonStyle}" />

                    <TextBlock
                        Name="TitleTextBlock"
                        VerticalAlignment="Center"
                        DockPanel.Dock="Left"
                        FontFamily="{StaticResource ArtifaktElementRegular}"
                        FontSize="20px"
                        Foreground="#3C3C3C"
                        TextWrapping="Wrap" />
                </DockPanel>

                <Rectangle
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Style="{StaticResource DividerRectangleStyle}" />

                <Grid
                    x:Name="ContentGrid"
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="160" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="50" />
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="1" Orientation=" Vertical">
                        <TextBlock
                            Name="DynamoCoreVersion"
                            HorizontalAlignment="Center"
                            Background="Transparent"
                            FontSize="14"
                            Foreground="{StaticResource DarkerGreyBrush}">
                            <Run Text="Dynamo Core" />
                            <Run Foreground="{StaticResource DarkerGreyBrush}" Text="{Binding Version, Mode=OneWay}" />
                        </TextBlock>

                        <TextBlock
                            Name="GenericHostVersion"
                            Margin="0"
                            HorizontalAlignment="Center"
                            Background="Transparent"
                            FontSize="14"
                            Foreground="{StaticResource DarkerGreyBrush}"
                            Visibility="{Binding HostVersion, Converter={StaticResource NullValueToCollapsedConverter}}">
                            <Run Text="{Binding HostName, Mode=OneWay}" />
                            <Run Foreground="{StaticResource DarkerGreyBrush}" Text="{Binding HostVersion, Mode=OneWay}" />
                        </TextBlock>
                    </StackPanel>

                    <Button
                        Name="DynamoWebsiteButton"
                        Grid.Row="2"
                        MinWidth="180"
                        MinHeight="40"
                        Margin="3"
                        HorizontalAlignment="Center"
                        Background="White"
                        BorderBrush="#BFBFBF"
                        Click="OnClickLink"
                        Foreground="#3C3C3C"
                        Style="{StaticResource CtaButtonStyle}" />
                    <Image
                        Grid.Row="0"
                        Grid.Column="0"
                        Width="128"
                        Height="128"
                        Source="/Dynamo.Wpf;component/UI/Images/AboutWindow/logo_about_dark.png" />
                </Grid>

                <Border
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="0,-15,0,0"
                    Background="{StaticResource LightMidGreyOpacityBrush}">
                    <ScrollViewer Margin="0,15,0,0" Padding="25">
                        <views:RichTextFile
                            Background="Transparent"
                            BorderThickness="0"
                            File="{Binding LicenseFile, Mode=OneTime}"
                            FontSize="10"
                            Foreground="#888888"
                            IsDocumentEnabled="True"
                            IsEnabled="True"
                            IsReadOnly="True"
                            OpenLinksInBrowser="True" />
                    </ScrollViewer>
                </Border>

            </Grid>
        </Border>
    </Grid>
</Window>
