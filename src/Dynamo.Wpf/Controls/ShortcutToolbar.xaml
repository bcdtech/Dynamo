<UserControl
    x:Class="Dynamo.UI.Controls.ShortcutToolbar"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Dynamo.Wpf.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="http://schemas.fontawesome.com/icons/"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Dynamo.Wpf.Properties"
    xmlns:ui="clr-namespace:Dynamo.UI"
    Name="MenuUserControl"
    Width="Auto"
    Height="Auto"
    d:Width="400"
    mc:Ignorable="d">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Dynamo.Wpf;component/Themes/Modern/Generic.xaml" />

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <ToolBarTray HorizontalAlignment="Stretch" Panel.ZIndex="2000">

        <ToolBar>
            <ItemsControl x:Name="ShortcutItemsControl" ItemsSource="{Binding ElementName='MenuUserControl', Path=ShortcutBarItems}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Command="{Binding ShortcutCommand}" CommandParameter="{Binding ShortcutCommandParameter}">
                            <Button.ToolTip>
                                <ToolTip Content="{Binding ShortcutToolTip}" Style="{StaticResource GenericToolTipLight}" />
                            </Button.ToolTip>
                            <Button.Resources>
                                <Image
                                    x:Key="Normal"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgNormalSource}" />
                                <Image
                                    x:Key="Disabled"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgDisabledSource}" />
                                <Image
                                    x:Key="Hover"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgHoverSource}" />
                            </Button.Resources>
                            <Button.Style>
                                <Style BasedOn="{StaticResource ShortCutButton}" TargetType="{x:Type Button}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsMouseOver}" Value="false" />
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled}" Value="true" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="Content" Value="{StaticResource Normal}" />
                                        </MultiDataTrigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Content" Value="{StaticResource Disabled}" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Content" Value="{StaticResource Hover}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel x:Name="ShortcutBarLeft" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ToolBar>
        <ToolBar>
            <Grid
                Name="bottomBarGrid"
                Grid.Column="1"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                DataContext="{Binding DynamoViewModel}"
                >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <WrapPanel
                    Grid.Row="0"
                    Grid.Column="0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Orientation="Horizontal"
                    Visibility="{Binding IsAbleToGoHome, Converter={StaticResource InverseBoolToVisibilityConverter}}">

                    <controls:RunSettingsControl
                        x:Name="RunSettingsControl"
                        Margin="2"
                        VerticalAlignment="Stretch"
                        DataContext="{Binding Path=HomeSpaceViewModel.RunSettingsViewModel}" />
                </WrapPanel>

                <!--  NotificationControl for showing run-time notifications  -->
                <controls:NotificationsControl  Grid.Column="1" />
            </Grid>
        </ToolBar>
        <ToolBar>
            <ItemsControl x:Name="ShortcutRightSideItemsControl" ItemsSource="{Binding ElementName='MenuUserControl', Path=ShortcutBarRightSideItems}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Command="{Binding ShortcutCommand}" CommandParameter="{Binding ShortcutCommandParameter}">
                            <Button.ToolTip>
                                <ToolTip Content="{Binding ShortcutToolTip}" Style="{StaticResource GenericToolTipLight}" />
                            </Button.ToolTip>
                            <Button.Resources>
                                <Image
                                    x:Key="Normal"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgNormalSource}" />
                                <Image
                                    x:Key="Disabled"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgDisabledSource}" />
                                <Image
                                    x:Key="Hover"
                                    Width="16"
                                    Height="16"
                                    Source="{Binding ImgHoverSource}" />
                            </Button.Resources>
                            <Button.Style>
                                <Style BasedOn="{StaticResource ShortCutButton}" TargetType="{x:Type Button}">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsMouseOver}" Value="false" />
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled}" Value="true" />
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="Content" Value="{StaticResource Normal}" />
                                        </MultiDataTrigger>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Content" Value="{StaticResource Disabled}" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="true">
                                            <Setter Property="Content" Value="{StaticResource Hover}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel x:Name="ShortcutBarRight" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>

            <Menu
                Name="RightMenu"
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                IsMainMenu="True"
                Style="{StaticResource MainMenu}">

                <MenuItem
                    Name="exportMenu"
                    Margin="10,-3,-10,0"
                    Cursor="Hand"
                    Focusable="False"
                    MouseEnter="exportMenu_MouseEnter"
                    MouseLeave="exportMenu_MouseLeave">
                    <MenuItem.Header>
                        <StackPanel Orientation="Horizontal">
                            <Image
                                x:Name="Icon"
                                Width="14px"
                                Source="/Dynamo.Wpf;component/Assets/Images/image-icon-default.png" />
                            <TextBlock
                                x:Name="HeaderText"
                                Margin="10,0,0,0"
                                VerticalAlignment="Center"
                                FontFamily="{StaticResource ArtifaktElementRegular}"
                                Foreground="#DCDCDC"
                                Text="{x:Static p:Resources.ShortcutExportAsImageMainMenu}"
                                Visibility="{Binding ShowMenuItemText, Converter={StaticResource BooleanToVisibilityCollapsedConverter}}" />
                        </StackPanel>
                    </MenuItem.Header>

                    <MenuItem
                        Name="saveImage"
                        Command="{Binding ValidateWorkSpaceBeforeToExportAsImageCommand}"
                        Focusable="False"
                        Header="{x:Static p:Resources.ShortcutExportWorkspace}">
                        <MenuItem.ToolTip>
                            <ToolTip Content="{x:Static p:Resources.DynamoViewToolbarExportButtonTooltip}" Style="{StaticResource GenericToolTipLight}" />
                        </MenuItem.ToolTip>
                    </MenuItem>


                </MenuItem>

            </Menu>
        </ToolBar>


    </ToolBarTray>
</UserControl>
